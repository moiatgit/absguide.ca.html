

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>XXX Chapter 21. Subshells &mdash; Guia Avançada de Programació Bash 10 març de 2014 documentació</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="Guia Avançada de Programació Bash 10 març de 2014 documentació" href="index.html"/>
        <link rel="up" title="XXX Part 5. Advanced Topics" href="part5.html"/>
        <link rel="next" title="XXX Chapter 22. Restricted Shells" href="restricted-sh.html"/>
        <link rel="prev" title="XXX Chapter 20. I/O Redirection" href="io-redirection.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Guia Avançada de Programació Bash
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Cercar..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="part1.html">Part 1. Introducció</a></li>
<li class="toctree-l1"><a class="reference internal" href="part2.html">Part 2. Conceptes bàsics</a></li>
<li class="toctree-l1"><a class="reference internal" href="part3.html">XXX Part 3. Beyond the Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="part4.html">XXX Part 4. Commands</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="part5.html">XXX Part 5. Advanced Topics</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="regexp.html">XXX Chapter 18. Regular Expressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="here-docs.html">XXX  Chapter 19. Document immediat</a></li>
<li class="toctree-l2"><a class="reference internal" href="io-redirection.html">XXX  Chapter 20. I/O Redirection</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">XXX  Chapter 21. Subshells</a></li>
<li class="toctree-l2"><a class="reference internal" href="restricted-sh.html">XXX  Chapter 22. Restricted Shells</a></li>
<li class="toctree-l2"><a class="reference internal" href="process-sub.html">XXX  Chapter 23. Process Substitution</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html">XXX  Chapter 24. Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="aliases.html">XXX Capítol 25. Àlies</a></li>
<li class="toctree-l2"><a class="reference internal" href="list-cons.html">XXX  Chapter 26. List Constructs</a></li>
<li class="toctree-l2"><a class="reference internal" href="arrays.html">XXX  Chapter 27. Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="ivr.html">XXX  Chapter 28. Indirect References</a></li>
<li class="toctree-l2"><a class="reference internal" href="networkprogramming.html">XXX  Chapter 30. Network Programming</a></li>
<li class="toctree-l2"><a class="reference internal" href="zeros.html">XXX  Chapter 31. Of Zeros and Nulls</a></li>
<li class="toctree-l2"><a class="reference internal" href="debugging.html">XXX  Chapter 32. Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="options.html">XXX  Chapter 33. Options</a></li>
<li class="toctree-l2"><a class="reference internal" href="gotchas.html">XXX Chapter 34. Gotchas</a></li>
<li class="toctree-l2"><a class="reference internal" href="scrstyle.html">XXX  Chapter 35. Scripting With Style</a></li>
<li class="toctree-l2"><a class="reference internal" href="unofficialst.html">XXX  35.1. Unofficial Shell Scripting Stylesheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="miscellany.html">XXX  Chapter 36. Miscellany</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash2.html">XXX  Chapter 37. Bash, versions 2, 3, and 4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="endnotes.html">Notes finals</a></li>
<li class="toctree-l1"><a class="reference internal" href="biblio.html">XXX  Bibliografia</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Guia Avançada de Programació Bash</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Inici</a> &raquo;</li>
      
          <li><a href="part5.html">XXX Part 5. Advanced Topics</a> &raquo;</li>
      
    <li>XXX  Chapter 21. Subshells</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="xxx-chapter-21-subshells">
<h1>XXX  Chapter 21. Subshells<a class="headerlink" href="#xxx-chapter-21-subshells" title="Link permanent a aquest títol">¶</a></h1>
<p>Running a shell script launches a new process, a <em>subshell</em> .</p>
<p>``                   Definition:                 `` A <em>subshell</em> is a
<a class="reference external" href="othertypesv.html#CHILDREF2">child process</a> launched by a shell (or
<em>shell script</em> ).</p>
<p>A subshell is a separate instance of the command processor &#8211; the
<em>shell</em> that gives you the prompt at the console or in an <em>xterm</em>
window. Just as your commands are interpreted at the command-line
prompt, similarly does a script
<a class="reference external" href="timedate.html#BATCHPROCREF">batch-process</a> a list of commands. Each
shell script running is, in effect, a subprocess ( <em>child process</em> ) of
the <a class="reference external" href="internal.html#FORKREF">parent</a> shell.</p>
<p>A shell script can itself launch subprocesses. These <em>subshells</em> let the
script do parallel processing, in effect executing multiple subtasks
simultaneously.</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># subshell-test.sh</span>

<span class="o">(</span>
<span class="c"># Inside parentheses, and therefore a subshell . . .</span>
<span class="k">while</span> <span class="o">[</span> <span class="m">1</span> <span class="o">]</span>   <span class="c"># Endless loop.</span>
<span class="k">do</span>
  <span class="nb">echo</span> <span class="s2">&quot;Subshell running . . .&quot;</span>
<span class="k">done</span>
<span class="o">)</span>

<span class="c">#  Script will run forever,</span>
<span class="c">#+ or at least until terminated by a Ctl-C.</span>

<span class="nb">exit</span> <span class="nv">$?</span>  <span class="c"># End of script (but will never get here).</span>



Now, run the script:
sh subshell-test.sh

And, <span class="k">while</span> the script is running, from a different xterm:
ps -efgrep subshell-test.sh

UID       PID   PPID  C STIME TTY      TIME     CMD
<span class="m">500</span>       <span class="m">2698</span>  <span class="m">2502</span>  <span class="m">0</span> 14:26 pts/4    00:00:00 sh subshell-test.sh
<span class="m">500</span>       <span class="m">2699</span>  <span class="m">2698</span> <span class="m">21</span> 14:26 pts/4    00:00:24 sh subshell-test.sh

          ^^^^

Analysis:
PID 2698, the script, launched PID 2699, the subshell.

Note: The <span class="s2">&quot;UID ...&quot;</span> line would be filtered out by the <span class="s2">&quot;grep&quot;</span> <span class="nb">command</span>,
but is shown here <span class="k">for</span> illustrative purposes.
</pre></div>
</div>
<p>In general, an <a class="reference external" href="external.html#EXTERNALREF">external command</a> in a
script <a class="reference external" href="internal.html#FORKREF">forks off</a> a subprocess, ` [1]</p>
<blockquote>
<div>&lt;subshells.html#FTN.AEN18102&gt;`__ whereas a Bash</div></blockquote>
<p><a class="reference external" href="internal.html#BUILTINREF">builtin</a> does not. For this reason,
builtins execute more quickly and use fewer system resources than their
external command equivalents.</p>
<p>** Command List within Parentheses**</p>
<blockquote>
<div><dl class="docutils">
<dt>( command1; command2; command3; ... )</dt>
<dd>A command list embedded between
``                   parentheses                 `` runs as a
subshell.</dd>
</dl>
<p>Variables in a subshell are <em>not</em> visible outside the block of code in</p>
</div></blockquote>
<p>the subshell. They are not accessible to the <a class="reference external" href="internal.html#FORKREF">parent
process</a> , to the shell that launched the
subshell. These are, in effect, variables
<a class="reference external" href="localvar.html#LOCALREF">local</a> to the <em>child process</em> .</p>
<div class="section" id="exemple-1-variable-scope-in-a-subshell">
<h2>Exemple 1. Variable scope in a subshell<a class="headerlink" href="#exemple-1-variable-scope-in-a-subshell" title="Link permanent a aquest títol">¶</a></h2>
<div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># subshell.sh</span>

<span class="nb">echo</span>

<span class="nb">echo</span> <span class="s2">&quot;We are outside the subshell.&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Subshell level OUTSIDE subshell = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span>
<span class="c"># Bash, version 3, adds the new         $BASH_SUBSHELL variable.</span>
<span class="nb">echo</span><span class="p">;</span> <span class="nb">echo</span>

<span class="nv">outer_variable</span><span class="o">=</span>Outer
<span class="nv">global_variable</span><span class="o">=</span>
<span class="c">#  Define global variable for &quot;storage&quot; of</span>
<span class="c">#+ value of subshell variable.</span>

<span class="o">(</span>
<span class="nb">echo</span> <span class="s2">&quot;We are inside the subshell.&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Subshell level INSIDE subshell = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span>
<span class="nv">inner_variable</span><span class="o">=</span>Inner

<span class="nb">echo</span> <span class="s2">&quot;From inside subshell, \&quot;inner_variable\&quot; = </span><span class="nv">$inner_variable</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;From inside subshell, \&quot;outer\&quot; = </span><span class="nv">$outer_variable</span><span class="s2">&quot;</span>

<span class="nv">global_variable</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$inner_variable</span><span class="s2">&quot;</span>   <span class="c">#  Will this allow &quot;exporting&quot;</span>
                                    <span class="c">#+ a subshell variable?</span>
<span class="o">)</span>

<span class="nb">echo</span><span class="p">;</span> <span class="nb">echo</span>
<span class="nb">echo</span> <span class="s2">&quot;We are outside the subshell.&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;Subshell level OUTSIDE subshell = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span>
<span class="nb">echo</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$inner_variable</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;inner_variable undefined in main body of shell&quot;</span>
<span class="k">else</span>
  <span class="nb">echo</span> <span class="s2">&quot;inner_variable defined in main body of shell&quot;</span>
<span class="k">fi</span>

<span class="nb">echo</span> <span class="s2">&quot;From main body of shell, \&quot;inner_variable\&quot; = </span><span class="nv">$inner_variable</span><span class="s2">&quot;</span>
<span class="c">#  $inner_variable will show as blank (uninitialized)</span>
<span class="c">#+ because variables defined in a subshell are &quot;local variables&quot;.</span>
<span class="c">#  Is there a remedy for this?</span>
<span class="nb">echo</span> <span class="s2">&quot;global_variable = &quot;</span><span class="nv">$global_variable</span><span class="s2">&quot;&quot;</span>  <span class="c"># Why doesn&#39;t this work?</span>

<span class="nb">echo</span>

<span class="c"># =======================================================================</span>

<span class="c"># Additionally ...</span>

<span class="nb">echo</span> <span class="s2">&quot;-----------------&quot;</span><span class="p">;</span> <span class="nb">echo</span>

<span class="nv">var</span><span class="o">=</span><span class="m">41</span>                                                 <span class="c"># Global variable.</span>

<span class="o">(</span> <span class="nb">let</span> <span class="s2">&quot;var+=1&quot;</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;\$var INSIDE subshell = </span><span class="nv">$var</span><span class="s2">&quot;</span> <span class="o">)</span>  <span class="c"># 42</span>

<span class="nb">echo</span> <span class="s2">&quot;\$var OUTSIDE subshell = </span><span class="nv">$var</span><span class="s2">&quot;</span>                   <span class="c"># 41</span>
<span class="c">#  Variable operations inside a subshell, even to a GLOBAL variable</span>
<span class="c">#+ do not affect the value of the variable outside the subshell!</span>


<span class="nb">exit </span>0

<span class="c">#  Question:</span>
<span class="c">#  --------</span>
<span class="c">#  Once having exited a subshell,</span>
<span class="c">#+ is there any way to reenter that very same subshell</span>
<span class="c">#+ to modify or access the subshell variables?</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="internalvariables.html#BASHPIDREF">$BASHPID</a> and <a class="reference external" href="gotchas.html#SUBPIT">Example
34-2</a> .</p>
<p>``                   Definition:                 `` The <em>scope</em> of a
variable is the context in which it has meaning, in which it has a
<em>value</em> that can be referenced. For example, the scope of a <a class="reference external" href="localvar.html#LOCALREF1">local
variable</a> lies only within the function,
block of code, or subshell within which it is defined, while the scope
of a <em>global</em> variable is the entire script in which it appears.</p>
<p><a href="#id1"><span class="problematic" id="id2">|</span></a>Note</p>
<p>While the <a class="reference external" href="internalvariables.html#BASHSUBSHELLREF">$BASH_SUBSHELL</a>
internal variable indicates the nesting level of a subshell, the
<a class="reference external" href="internalvariables.html#SHLVLREF">$SHLVL</a> variable <em>shows no change</em>
within a subshell.</p>
<hr class="docutils" />
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHE</span>
</pre></div>
</div>
<dl class="docutils">
<dt>LL outside subshell</dt>
<dd><dl class="first last docutils">
<dt>= $BASH_SUBSHELL&#8221;</dt>
<dd># 0
( echo &#8221; $BASH_SU</dd>
</dl>
</dd>
<dt>BSHELL inside subshell</dt>
<dd>= $BASH_SUBSHELL&#8221;</dd>
<dt>)     # 1</dt>
<dd>( ( echo &#8221; $BASH_</dd>
</dl>
<p>SUBSHELL inside nested s
ubshell = $BASH_SUBSHELL
&#8221; ) ) # 2</p>
<blockquote>
<div><dl class="docutils">
<dt># ^ ^</dt>
<dd><a href="#id3"><span class="problematic" id="id4">**</span></a>* nested *</dd>
</dl>
</div></blockquote>
<dl class="docutils">
<dt><a href="#id5"><span class="problematic" id="id6">**</span></a></dt>
<dd><p class="first">^ ^</p>
<blockquote class="last">
<div><p>echo</p>
<p>echo &#8221; $SHLVL outsi</p>
</div></blockquote>
</dd>
<dt>de subshell = $SHLVL&#8221;</dt>
<dd># 3
( echo &#8221; $SHLVL ins</dd>
</dl>
<p>ide subshell  = $SHLVL&#8221;
)   # 3 (No change!)</p>
<hr class="docutils" />
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHELL outside subshell       = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span>           <span class="c"># 0</span>
  <span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHELL inside subshell        = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span> <span class="o">)</span>     <span class="c"># 1</span>
  <span class="o">(</span> <span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHELL inside nested subshell = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span> <span class="o">)</span> <span class="o">)</span> <span class="c"># 2</span>
<span class="c"># ^ ^                           *** nested ***                        ^ ^</span>

<span class="nb">echo</span>

<span class="nb">echo</span> <span class="s2">&quot; \$SHLVL outside subshell = </span><span class="nv">$SHLVL</span><span class="s2">&quot;</span>       <span class="c"># 3</span>
<span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot; \$SHLVL inside subshell  = </span><span class="nv">$SHLVL</span><span class="s2">&quot;</span> <span class="o">)</span>   <span class="c"># 3 (No change!)</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHELL outside subshell       = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span>           <span class="c"># 0</span>
  <span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHELL inside subshell        = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span> <span class="o">)</span>     <span class="c"># 1</span>
  <span class="o">(</span> <span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot; \$BASH_SUBSHELL inside nested subshell = </span><span class="nv">$BASH_SUBSHELL</span><span class="s2">&quot;</span> <span class="o">)</span> <span class="o">)</span> <span class="c"># 2</span>
<span class="c"># ^ ^                           *** nested ***                        ^ ^</span>

<span class="nb">echo</span>

<span class="nb">echo</span> <span class="s2">&quot; \$SHLVL outside subshell = </span><span class="nv">$SHLVL</span><span class="s2">&quot;</span>       <span class="c"># 3</span>
<span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot; \$SHLVL inside subshell  = </span><span class="nv">$SHLVL</span><span class="s2">&quot;</span> <span class="o">)</span>   <span class="c"># 3 (No change!)</span>
</pre></div>
</div>
<p>Directory changes made in a subshell do not carry over to the parent
shell.</p>
</div>
<div class="section" id="exemple-2-list-user-profiles">
<h2>Exemple 2. List User Profiles<a class="headerlink" href="#exemple-2-list-user-profiles" title="Link permanent a aquest títol">¶</a></h2>
<div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># allprofs.sh: Print all user profiles.</span>

<span class="c"># This script written by Heiner Steven, and modified by the document author.</span>

<span class="nv">FILE</span><span class="o">=</span>.bashrc  <span class="c">#  File containing user profile,</span>
              <span class="c">#+ was &quot;.profile&quot; in original script.</span>

<span class="k">for</span> home in <span class="sb">`</span>awk -F: <span class="s1">&#39;{print $6}&#39;</span> /etc/passwd<span class="sb">`</span>
<span class="k">do</span>
  <span class="o">[</span> -d <span class="s2">&quot;</span><span class="nv">$home</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="p">|</span><span class="k">continue</span>    <span class="c"># If no home directory, go to next.</span>
  <span class="o">[</span> -r <span class="s2">&quot;</span><span class="nv">$home</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="p">|</span><span class="k">continue</span>    <span class="c"># If not readable, go to next.</span>
  <span class="o">(</span><span class="nb">cd</span> <span class="nv">$home</span><span class="p">;</span> <span class="o">[</span> -e <span class="nv">$FILE</span> <span class="o">]</span> <span class="o">&amp;&amp;</span> less <span class="nv">$FILE</span><span class="o">)</span>
<span class="k">done</span>

<span class="c">#  When script terminates, there is no need to &#39;cd&#39; back to original directory,</span>
<span class="c">#+ because &#39;cd $home&#39; takes place in a subshell.</span>

<span class="nb">exit </span>0
</pre></div>
</div>
<p>A subshell may be used to set up a &#8220;dedicated environment&#8221; for a command
group.</p>
<div class="highlight-sh"><div class="highlight"><pre>COMMAND1
COMMAND2
COMMAND3
<span class="o">(</span>
  <span class="nv">IFS</span><span class="o">=</span>:
  <span class="nv">PATH</span><span class="o">=</span>/bin
  <span class="nb">unset </span>TERMINFO
  <span class="nb">set</span> -C
  <span class="nb">shift </span>5
  COMMAND4
  COMMAND5
  <span class="nb">exit </span><span class="m">3</span> <span class="c"># Only exits the subshell!</span>
<span class="o">)</span>
<span class="c"># The parent shell has not been affected, and the environment is preserved.</span>
COMMAND6
COMMAND7
</pre></div>
</div>
<p>As seen here, the <a class="reference external" href="internal.html#EXITREF">exit</a> command only
terminates the subshell in which it is running, <em>not</em> the parent shell
or script.
One application of such a &#8220;dedicated environment&#8221; is testing whether a
variable is defined.</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="nb">set</span> -u<span class="p">;</span> : <span class="nv">$variable</span><span class="o">)</span> 2&gt; /dev/null
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;Variable is set.&quot;</span>
<span class="k">fi</span>     <span class="c">#  Variable has been set in current script,</span>
       <span class="c">#+ or is an an internal Bash variable,</span>
       <span class="c">#+ or is present in environment (has been exported).</span>

<span class="c"># Could also be written [[ ${variable-x} != x |${variable-y} != y ]]</span>
<span class="c"># or                    [[ ${variable-x} != x$variable ]]</span>
<span class="c"># or                    [[ ${variable+x} = x ]]</span>
<span class="c"># or                    [[ ${variable-x} != x ]]</span>
</pre></div>
</div>
<p>Another application is checking for a lock file:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="k">if</span> <span class="o">(</span><span class="nb">set</span> -C<span class="p">;</span> : &gt; lock_file<span class="o">)</span> 2&gt; /dev/null
<span class="k">then</span>
  :   <span class="c"># lock_file didn&#39;t exist: no user running the script</span>
<span class="k">else</span>
  <span class="nb">echo</span> <span class="s2">&quot;Another user is already running that script.&quot;</span>
<span class="nb">exit </span>65
<span class="k">fi</span>

<span class="c">#  Code snippet by StÃ©phane Chazelas,</span>
<span class="c">#+ with modifications by Paulo Marcel Coelho Aragao.</span>
</pre></div>
</div>
<ul class="simple">
<li></li>
</ul>
<p>Processes may execute in parallel within different subshells. This
permits breaking a complex task into subcomponents processed
concurrently.</p>
</div>
<div class="section" id="exemple-3-running-parallel-processes-in-subshells">
<h2>Exemple 3. Running parallel processes in subshells<a class="headerlink" href="#exemple-3-running-parallel-processes-in-subshells" title="Link permanent a aquest títol">¶</a></h2>
<div class="highlight-sh"><div class="highlight"><pre><span class="o">(</span>cat list1 list2 list3sort <span class="p">|</span> uniq &gt; list123<span class="o">)</span> <span class="p">&amp;</span>
   <span class="o">(</span>cat list4 list5 list6sort <span class="p">|</span> uniq &gt; list456<span class="o">)</span> <span class="p">&amp;</span>
   <span class="c"># Merges and sorts both sets of lists simultaneously.</span>
   <span class="c"># Running in background ensures parallel execution.</span>
   <span class="c">#</span>
   <span class="c"># Same effect as</span>
   <span class="c">#   cat list1 list2 list3sort | uniq &gt; list123 &amp;</span>
   <span class="c">#   cat list4 list5 list6sort | uniq &gt; list456 &amp;</span>

   <span class="nb">wait</span>   <span class="c"># Don&#39;t execute the next command until subshells finish.</span>

   diff list123 list456
</pre></div>
</div>
<p>Redirecting I/O to a subshell uses the &#8220;|&#8221; pipe operator, as in
``             ls -al(command)           `` .</p>
<p><a href="#id7"><span class="problematic" id="id8">|</span></a>Note</p>
<p>A code block between <a class="reference external" href="special-chars.html#CODEBLOCKREF">curly
brackets</a> does <em>not</em> launch a
subshell.</p>
<p>{ command1; command2; command3; . . . commandN; }</p>
<hr class="docutils" />
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">var1</span><span class="o">=</span>23
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var1</span><span class="s2">&quot;</span>   <span class="c"># 23</span>

<span class="o">{</span> <span class="nv">var1</span><span class="o">=</span>76<span class="p">;</span> <span class="o">}</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var1</span><span class="s2">&quot;</span>   <span class="c"># 76</span>
</pre></div>
</div>
<hr class="docutils" />
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">var1</span><span class="o">=</span>23
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var1</span><span class="s2">&quot;</span>   <span class="c"># 23</span>

<span class="o">{</span> <span class="nv">var1</span><span class="o">=</span>76<span class="p">;</span> <span class="o">}</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var1</span><span class="s2">&quot;</span>   <span class="c"># 76</span>
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">var1</span><span class="o">=</span>23
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var1</span><span class="s2">&quot;</span>   <span class="c"># 23</span>

<span class="o">{</span> <span class="nv">var1</span><span class="o">=</span>76<span class="p">;</span> <span class="o">}</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$var1</span><span class="s2">&quot;</span>   <span class="c"># 76</span>
</pre></div>
</div>
<div class="section" id="notes">
<h3>Notes<a class="headerlink" href="#notes" title="Link permanent a aquest títol">¶</a></h3>
<p>` [1]  &lt;subshells.html#AEN18102&gt;`__</p>
<p>An external command invoked with an <a class="reference external" href="internal.html#EXECREF">exec</a>
does <em>not</em> (usually) fork off a subprocess / subshell.</p>
</div>
</div>
</div>


          </div>
          <footer>
  <hr/>

  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="restricted-sh.html" class="btn btn-neutral float-right" title="XXX Chapter 22. Restricted Shells" accesskey="n">Seg <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="io-redirection.html" class="btn btn-neutral" title="XXX Chapter 20. I/O Redirection"
                                                            accesskey="p"><span class="fa fa-arrow-circle-left"></span> Ant</a>
      
    </div>
  

  <div role="contentinfo">
    <p>
    </p>
  </div>
      Pàgina generada amb <a href="http://sphinx-doc.org/">Sphinx</a> amb una lleugera
                                     variació del tema<a
                                     href="https://github.com/snide/sphinx_rtd_theme">
                                         sphinx-rtd-theme </a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'10 març de 2014',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>