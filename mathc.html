

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>XXX 16.8. Math Commands &mdash; Guia Avançada de Programació Bash 10 març de 2014 documentació</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="copyright" title="Copyright" href="copyright.html"/>
    <link rel="top" title="Guia Avançada de Programació Bash 10 març de 2014 documentació" href="index.html"/>
        <link rel="up" title="XXX Chapter 16. External Filters, Programs and Commands" href="external.html"/>
        <link rel="next" title="XXX 16.9. Miscellaneous Commands" href="extmisc.html"/>
        <link rel="prev" title="XXX 16.7. Terminal Control Commands" href="terminalccmds.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="index.html" class="icon icon-home"> Guia Avançada de Programació Bash
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Cercar..." />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="part1.html">Part 1. Introducció</a></li>
<li class="toctree-l1"><a class="reference internal" href="part2.html">Part 2. Conceptes bàsics</a></li>
<li class="toctree-l1"><a class="reference internal" href="part3.html">XXX Part 3. Beyond the Basics</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="part4.html">XXX Part 4. Commands</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="internal.html">XXX  Chapter 15. Internal Commands and Builtins</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="external.html">XXX  Chapter 16. External Filters, Programs and Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="system.html">XXX  Chapter 17. System and Administrative Commands</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="part5.html">XXX Part 5. Advanced Topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="endnotes.html">Notes finals</a></li>
<li class="toctree-l1"><a class="reference internal" href="biblio.html">XXX  Bibliografia</a></li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Guia Avançada de Programació Bash</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Inici</a> &raquo;</li>
      
          <li><a href="part4.html">XXX Part 4. Commands</a> &raquo;</li>
      
          <li><a href="external.html">XXX  Chapter 16. External Filters, Programs and Commands</a> &raquo;</li>
      
    <li>XXX 16.8. Math Commands</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="xxx-16-8-math-commands">
<h1>XXX 16.8. Math Commands<a class="headerlink" href="#xxx-16-8-math-commands" title="Link permanent a aquest títol">¶</a></h1>
<p>** &#8220;Doing the numbers&#8221; **</p>
<blockquote>
<div><dl class="docutils">
<dt><strong>factor</strong></dt>
<dd><p class="first">Decompose an integer into prime factors.</p>
<div class="last highlight-sh"><div class="highlight"><pre>bash<span class="nv">$ </span>factor 27417
27417: <span class="m">3</span> <span class="m">13</span> <span class="m">19</span> 37
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
<div class="section" id="exemple-46-generating-prime-numbers">
<h2>Exemple 46. Generating prime numbers<a class="headerlink" href="#exemple-46-generating-prime-numbers" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># primes2.sh</span>

<span class="c">#  Generating prime numbers the quick-and-easy way,</span>
<span class="c">#+ without resorting to fancy algorithms.</span>

<span class="nv">CEILING</span><span class="o">=</span><span class="m">10000</span>   <span class="c"># 1 to 10000</span>
<span class="nv">PRIME</span><span class="o">=</span>0
<span class="nv">E_NOTPRIME</span><span class="o">=</span>

is_prime <span class="o">()</span>
<span class="o">{</span>
  <span class="nb">local </span>factors
  <span class="nv">factors</span><span class="o">=(</span> <span class="k">$(</span>factor <span class="nv">$1</span><span class="k">)</span> <span class="o">)</span>  <span class="c"># Load output of `factor` into array.</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="si">${</span><span class="nv">factors</span><span class="p">[2]</span><span class="si">}</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="c">#  Third element of &quot;factors&quot; array:</span>
<span class="c">#+ ${factors[2]} is 2nd factor of argument.</span>
<span class="c">#  If it is blank, then there is no 2nd factor,</span>
<span class="c">#+ and the argument is therefore prime.</span>
<span class="k">then</span>
  <span class="k">return</span> <span class="nv">$PRIME</span>             <span class="c"># 0</span>
<span class="k">else</span>
  <span class="k">return</span> <span class="nv">$E_NOTPRIME</span>        <span class="c"># null</span>
<span class="k">fi</span>
<span class="o">}</span>

<span class="nb">echo</span>
<span class="k">for</span> n in <span class="k">$(</span>seq <span class="nv">$CEILING</span><span class="k">)</span>
<span class="k">do</span>
  <span class="k">if</span> is_prime <span class="nv">$n</span>
  <span class="k">then</span>
    <span class="nb">printf</span> %5d <span class="nv">$n</span>
  <span class="k">fi</span>   <span class="c">#    ^  Five positions per number suffices.</span>
<span class="k">done</span>   <span class="c">#       For a higher $CEILING, adjust upward, as necessary.</span>

<span class="nb">echo</span>

<span class="nb">exit</span>
</pre></div>
</div>
</div></blockquote>
<dl class="docutils">
<dt><strong>bc</strong></dt>
<dd><p class="first">Bash can&#8217;t handle floating point calculations, and it lacks
operators for certain important mathematical functions. Fortunately,
<strong>bc</strong> gallops to the rescue.</p>
<p>Not just a versatile, arbitrary precision calculation utility,
<strong>bc</strong> offers many of the facilities of a programming language. It
has a syntax vaguely resembling <strong>C</strong> .</p>
<p>Since it is a fairly well-behaved UNIX utility, and may therefore be
used in a <a class="reference external" href="special-chars.html#PIPEREF">pipe</a> , <strong>bc</strong> comes in
handy in scripts.</p>
<p>Here is a simple template for using <strong>bc</strong> to calculate a script
variable. This uses <a class="reference external" href="commandsub.html#COMMANDSUBREF">command
substitution</a> .</p>
<div class="last highlight-sh"><div class="highlight"><pre><span class="nv">variable</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;OPTIONS; OPERATIONS&quot;</span>bc<span class="k">)</span>
</pre></div>
</div>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="exemple-47-monthly-payment-on-a-mortgage">
<h2>Exemple 47. Monthly Payment on a Mortgage<a class="headerlink" href="#exemple-47-monthly-payment-on-a-mortgage" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># monthlypmt.sh: Calculates monthly payment on a mortgage.</span>


<span class="c">#  This is a modification of code in the</span>
<span class="c">#+ &quot;mcalc&quot; (mortgage calculator) package,</span>
<span class="c">#+ by Jeff Schmidt</span>
<span class="c">#+ and</span>
<span class="c">#+ Mendel Cooper (yours truly, the ABS Guide author).</span>
<span class="c">#   http://www.ibiblio.org/pub/Linux/apps/financial/mcalc-1.6.tar.gz</span>

<span class="nb">echo</span>
<span class="nb">echo</span> <span class="s2">&quot;Given the principal, interest rate, and term of a mortgage,&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot;calculate the monthly payment.&quot;</span>

<span class="nv">bottom</span><span class="o">=</span>1.0

<span class="nb">echo</span>
<span class="nb">echo</span> -n <span class="s2">&quot;Enter principal (no commas) &quot;</span>
<span class="nb">read </span>principal
<span class="nb">echo</span> -n <span class="s2">&quot;Enter interest rate (percent) &quot;</span>  <span class="c"># If 12%, enter &quot;12&quot;, not &quot;.12&quot;.</span>
<span class="nb">read </span>interest_r
<span class="nb">echo</span> -n <span class="s2">&quot;Enter term (months) &quot;</span>
<span class="nb">read </span>term


 <span class="nv">interest_r</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$interest_r</span><span class="s2">/100.0&quot;</span>bc<span class="k">)</span> <span class="c"># Convert to decimal.</span>
                 <span class="c">#           ^^^^^^^^^^^^^^^^^  Divide by 100.</span>
                 <span class="c"># &quot;scale&quot; determines how many decimal places.</span>

 <span class="nv">interest_rate</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$interest_r</span><span class="s2">/12 + 1.0&quot;</span>bc<span class="k">)</span>


 <span class="nv">top</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$principal</span><span class="s2">*</span><span class="nv">$interest_rate</span><span class="s2">^</span><span class="nv">$term</span><span class="s2">&quot;</span>bc<span class="k">)</span>
          <span class="c">#           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span>
          <span class="c">#           Standard formula for figuring interest.</span>

 <span class="nb">echo</span><span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;Please be patient. This may take a while.&quot;</span>

 <span class="nb">let</span> <span class="s2">&quot;months = </span><span class="nv">$term</span><span class="s2"> - 1&quot;</span>
<span class="c"># ====================================================================</span>
 <span class="k">for</span> <span class="o">((</span><span class="nv">x</span><span class="o">=</span><span class="nv">$months</span><span class="p">;</span> x &gt; 0<span class="p">;</span> x--<span class="o">))</span>
 <span class="k">do</span>
   <span class="nv">bot</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$interest_rate</span><span class="s2">^</span><span class="nv">$x</span><span class="s2">&quot;</span>bc<span class="k">)</span>
   <span class="nv">bottom</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$bottom</span><span class="s2">+</span><span class="nv">$bot</span><span class="s2">&quot;</span>bc<span class="k">)</span>
<span class="c">#  bottom = $(($bottom + $bot&quot;))</span>
 <span class="k">done</span>
<span class="c"># ====================================================================</span>

<span class="c"># --------------------------------------------------------------------</span>
<span class="c">#  Rick Boivie pointed out a more efficient implementation</span>
<span class="c">#+ of the above loop, which decreases computation time by 2/3.</span>

<span class="c"># for ((x=1; x &lt;= $months; x++))</span>
<span class="c"># do</span>
<span class="c">#   bottom=$(echo &quot;scale=9; $bottom * $interest_rate + 1&quot;bc)</span>
<span class="c"># done</span>


<span class="c">#  And then he came up with an even more efficient alternative,</span>
<span class="c">#+ one that cuts down the run time by about 95%!</span>

<span class="c"># bottom=`{</span>
<span class="c">#     echo &quot;scale=9; bottom=$bottom; interest_rate=$interest_rate&quot;</span>
<span class="c">#     for ((x=1; x &lt;= $months; x++))</span>
<span class="c">#     do</span>
<span class="c">#          echo &#39;bottom = bottom * interest_rate + 1&#39;</span>
<span class="c">#     done</span>
<span class="c">#     echo &#39;bottom&#39;</span>
<span class="c">#     }bc`       # Embeds a &#39;for loop&#39; within command substitution.</span>
<span class="c"># --------------------------------------------------------------------------</span>
<span class="c">#  On the other hand, Frank Wang suggests:</span>
<span class="c">#  bottom=$(echo &quot;scale=9; ($interest_rate^$term-1)/($interest_rate-1)&quot;bc)</span>

<span class="c">#  Because . . .</span>
<span class="c">#  The algorithm behind the loop</span>
<span class="c">#+ is actually a sum of geometric proportion series.</span>
<span class="c">#  The sum formula is e0(1-q^n)/(1-q),</span>
<span class="c">#+ where e0 is the first element and q=e(n+1)/e(n)</span>
<span class="c">#+ and n is the number of elements.</span>
<span class="c"># --------------------------------------------------------------------------</span>


 <span class="c"># let &quot;payment = $top/$bottom&quot;</span>
 <span class="nv">payment</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=2; </span><span class="nv">$top</span><span class="s2">/</span><span class="nv">$bottom</span><span class="s2">&quot;</span>bc<span class="k">)</span>
 <span class="c"># Use two decimal places for dollars and cents.</span>

 <span class="nb">echo</span>
<span class="nb"> echo</span> <span class="s2">&quot;monthly payment = \$</span><span class="nv">$payment</span><span class="s2">&quot;</span>  <span class="c"># Echo a dollar sign in front of amount.</span>
 <span class="nb">echo</span>


<span class="nb"> exit </span>0


 <span class="c"># Exercises:</span>
 <span class="c">#   1) Filter input to permit commas in principal amount.</span>
 <span class="c">#   2) Filter input to permit interest to be entered as percent or decimal.</span>
 <span class="c">#   3) If you are really ambitious,</span>
 <span class="c">#+     expand this script to print complete amortization tables.</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="exemple-48-base-conversion">
<h2>Exemple 48. Base Conversion<a class="headerlink" href="#exemple-48-base-conversion" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c">###########################################################################</span>
<span class="c"># Shellscript:  base.sh - print number to different bases (Bourne Shell)</span>
<span class="c"># Author     :  Heiner Steven (heiner.steven@odn.de)</span>
<span class="c"># Date       :  07-03-95</span>
<span class="c"># Category   :  Desktop</span>
<span class="c"># $Id: base.sh,v 1.2 2000/02/06 19:55:35 heiner Exp $</span>
<span class="c"># ==&gt; Above line is RCS ID info.</span>
<span class="c">###########################################################################</span>
<span class="c"># Description</span>
<span class="c">#</span>
<span class="c"># Changes</span>
<span class="c"># 21-03-95 stv  fixed error occuring with 0xb as input (0.2)</span>
<span class="c">###########################################################################</span>

<span class="c"># ==&gt; Used in ABS Guide with the script author&#39;s permission.</span>
<span class="c"># ==&gt; Comments added by ABS Guide author.</span>

<span class="nv">NOARGS</span><span class="o">=</span>85
<span class="nv">PN</span><span class="o">=</span><span class="sb">`</span>basename <span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span><span class="sb">`</span>                 <span class="c"># Program name</span>
<span class="nv">VER</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="s1">&#39;$Revision: 1.2 $&#39;</span>cut -d<span class="s1">&#39; &#39;</span> -f2<span class="sb">`</span>  <span class="c"># ==&gt; VER=1.2</span>

Usage <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$PN</span><span class="s2"> - print number to different bases, </span><span class="nv">$VER</span><span class="s2"> (stv &#39;95)</span>
<span class="s2">usage: </span><span class="nv">$PN</span><span class="s2"> [number ...]</span>

<span class="s2">If no number is given, the numbers are read from standard input.</span>
<span class="s2">A number may be</span>
<span class="s2">    binary (base 2)     starting with 0b (i.e. 0b1100)</span>
<span class="s2">    octal (base 8)      starting with 0  (i.e. 014)</span>
<span class="s2">    hexadecimal (base 16)   starting with 0x (i.e. 0xc)</span>
<span class="s2">    decimal         otherwise (i.e. 12)&quot;</span> &gt;<span class="p">&amp;</span>2
    <span class="nb">exit</span> <span class="nv">$NOARGS</span>
<span class="o">}</span>   <span class="c"># ==&gt; Prints usage message.</span>

Msg <span class="o">()</span> <span class="o">{</span>
    <span class="k">for</span> i   <span class="c"># ==&gt; in [list] missing. Why?</span>
    <span class="k">do</span> <span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$PN</span><span class="s2">: </span><span class="nv">$i</span><span class="s2">&quot;</span> &gt;<span class="p">&amp;</span>2
    <span class="k">done</span>
<span class="o">}</span>

Fatal <span class="o">()</span> <span class="o">{</span> Msg <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span><span class="p">;</span> <span class="nb">exit </span>66<span class="p">;</span> <span class="o">}</span>

PrintBases <span class="o">()</span> <span class="o">{</span>
    <span class="c"># Determine base of the number</span>
    <span class="k">for</span> i      <span class="c"># ==&gt; in [list] missing...</span>
    <span class="k">do</span>         <span class="c"># ==&gt; so operates on command-line arg(s).</span>
    <span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span> in
        0b*<span class="o">)</span>        <span class="nv">ibase</span><span class="o">=</span>2<span class="p">;;</span>   <span class="c"># binary</span>
        0x*<span class="p">|</span><span class="o">[</span>a-f<span class="o">]</span>*<span class="p">|</span><span class="o">[</span>A-F<span class="o">]</span>*<span class="o">)</span>  <span class="nv">ibase</span><span class="o">=</span>16<span class="p">;;</span>  <span class="c"># hexadecimal</span>
        0*<span class="o">)</span>         <span class="nv">ibase</span><span class="o">=</span>8<span class="p">;;</span>   <span class="c"># octal</span>
        <span class="o">[</span>1-9<span class="o">]</span>*<span class="o">)</span>     <span class="nv">ibase</span><span class="o">=</span>10<span class="p">;;</span>  <span class="c"># decimal</span>
        *<span class="o">)</span>
        Msg <span class="s2">&quot;illegal number </span><span class="nv">$i</span><span class="s2"> - ignored&quot;</span>
        <span class="k">continue</span><span class="p">;;</span>
    <span class="k">esac</span>

    <span class="c"># Remove prefix, convert hex digits to uppercase (bc needs this).</span>
    <span class="nv">number</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$i</span><span class="s2">&quot;</span>sed -e <span class="s1">&#39;s:^0[bBxX]::&#39;</span> <span class="p">|</span> tr <span class="s1">&#39;[a-f]&#39;</span> <span class="s1">&#39;[A-F]&#39;</span><span class="sb">`</span>
    <span class="c"># ==&gt; Uses &quot;:&quot; as sed separator, rather than &quot;/&quot;.</span>

    <span class="c"># Convert number to decimal</span>
    <span class="nv">dec</span><span class="o">=</span><span class="sb">`</span><span class="nb">echo</span> <span class="s2">&quot;ibase=</span><span class="nv">$ibase</span><span class="s2">; </span><span class="nv">$number</span><span class="s2">&quot;</span>bc<span class="sb">`</span>  <span class="c"># ==&gt; &#39;bc&#39; is calculator utility.</span>
    <span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$dec</span><span class="s2">&quot;</span> in
        <span class="o">[</span>0-9<span class="o">]</span>*<span class="o">)</span> <span class="p">;;</span>           <span class="c"># number ok</span>
        *<span class="o">)</span>      <span class="k">continue</span><span class="p">;;</span>       <span class="c"># error: ignore</span>
    <span class="k">esac</span>

    <span class="c"># Print all conversions in one line.</span>
    <span class="c"># ==&gt; &#39;here document&#39; feeds command list to &#39;bc&#39;.</span>
    <span class="nb">echo</span> <span class="sb">`</span>bc &lt;&lt;!
        <span class="nv">obase</span><span class="o">=</span>16<span class="p">;</span> <span class="s2">&quot;hex=&quot;</span><span class="p">;</span> <span class="nv">$dec</span>
        <span class="nv">obase</span><span class="o">=</span>10<span class="p">;</span> <span class="s2">&quot;dec=&quot;</span><span class="p">;</span> <span class="nv">$dec</span>
        <span class="nv">obase</span><span class="o">=</span>8<span class="p">;</span>  <span class="s2">&quot;oct=&quot;</span><span class="p">;</span> <span class="nv">$dec</span>
        <span class="nv">obase</span><span class="o">=</span>2<span class="p">;</span>  <span class="s2">&quot;bin=&quot;</span><span class="p">;</span> <span class="nv">$dec</span>
!
    <span class="sb">`</span>sed -e <span class="s1">&#39;s: :    :g&#39;</span>

    <span class="k">done</span>
<span class="o">}</span>

<span class="k">while</span> <span class="o">[</span> <span class="nv">$# </span>-gt <span class="m">0</span> <span class="o">]</span>
<span class="c"># ==&gt;  Is a &quot;while loop&quot; really necessary here,</span>
<span class="c"># ==&gt;+ since all the cases either break out of the loop</span>
<span class="c"># ==&gt;+ or terminate the script.</span>
<span class="c"># ==&gt; (Above comment by Paulo Marcel Coelho Aragao.)</span>
<span class="k">do</span>
    <span class="k">case</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> in
    --<span class="o">)</span>     <span class="nb">shift</span><span class="p">;</span> <span class="nb">break</span><span class="p">;;</span>
    -h<span class="o">)</span>     Usage<span class="p">;;</span>                 <span class="c"># ==&gt; Help message.</span>
    -*<span class="o">)</span>     Usage<span class="p">;;</span>
         *<span class="o">)</span>     <span class="nb">break</span><span class="p">;;</span>                 <span class="c"># First number</span>
    <span class="k">esac</span>   <span class="c"># ==&gt; Error checking for illegal input might be appropriate.</span>
    <span class="nb">shift</span>
<span class="k">done</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span>-gt <span class="m">0</span> <span class="o">]</span>
<span class="k">then</span>
    PrintBases <span class="s2">&quot;</span><span class="nv">$@</span><span class="s2">&quot;</span>
<span class="k">else</span>                    <span class="c"># Read from stdin.</span>
    <span class="k">while</span> <span class="nb">read </span>line
    <span class="k">do</span>
    PrintBases <span class="nv">$line</span>
    <span class="k">done</span>
<span class="k">fi</span>


<span class="nb">exit</span>
</pre></div>
</div>
<p>An alternate method of invoking <strong>bc</strong> involves using a <a class="reference external" href="here-docs.html#HEREDOCREF">here
document</a> embedded within a <a class="reference external" href="commandsub.html#COMMANDSUBREF">command
substitution</a> block. This is
especially appropriate when a script needs to pass a list of options
and commands to <strong>bc</strong> .</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">variable</span><span class="o">=</span><span class="sb">`</span>bc <span class="s">&lt;&lt; LIMIT_STRING</span>
<span class="s">options</span>
<span class="s">statements</span>
<span class="s">operations</span>
<span class="s">LIMIT_STRING</span>
<span class="sb">`</span>

...or...


<span class="nv">variable</span><span class="o">=</span><span class="k">$(</span>bc <span class="s">&lt;&lt; LIMIT_STRING</span>
<span class="s">options</span>
<span class="s">statements</span>
<span class="s">operations</span>
<span class="s">LIMIT_STRING</span>
<span class="k">)</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="exemple-49-invoking-bc-using-a-here-document">
<h2>Exemple 49. Invoking <em>bc</em> using a <em>here document</em><a class="headerlink" href="#exemple-49-invoking-bc-using-a-here-document" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># Invoking &#39;bc&#39; using command substitution</span>
<span class="c"># in combination with a &#39;here document&#39;.</span>


<span class="nv">var1</span><span class="o">=</span><span class="sb">`</span>bc <span class="s">&lt;&lt; EOF</span>
<span class="s">18.33 * 19.78</span>
<span class="s">EOF</span>
<span class="sb">`</span>
<span class="nb">echo</span> <span class="nv">$var1</span>       <span class="c"># 362.56</span>


<span class="c">#  $( ... ) notation also works.</span>
<span class="nv">v1</span><span class="o">=</span>23.53
<span class="nv">v2</span><span class="o">=</span>17.881
<span class="nv">v3</span><span class="o">=</span>83.501
<span class="nv">v4</span><span class="o">=</span>171.63

<span class="nv">var2</span><span class="o">=</span><span class="k">$(</span>bc <span class="s">&lt;&lt; EOF</span>
<span class="s">scale = 4</span>
<span class="s">a = ( $v1 + $v2 )</span>
<span class="s">b = ( $v3 * $v4 )</span>
<span class="s">a * b + 15.35</span>
<span class="s">EOF</span>
<span class="k">)</span>
<span class="nb">echo</span> <span class="nv">$var2</span>       <span class="c"># 593487.8452</span>


<span class="nv">var3</span><span class="o">=</span><span class="k">$(</span>bc -l <span class="s">&lt;&lt; EOF</span>
<span class="s">scale = 9</span>
<span class="s">s ( 1.7 )</span>
<span class="s">EOF</span>
<span class="k">)</span>
<span class="c"># Returns the sine of 1.7 radians.</span>
<span class="c"># The &quot;-l&quot; option calls the &#39;bc&#39; math library.</span>
<span class="nb">echo</span> <span class="nv">$var3</span>       <span class="c"># .991664810</span>


<span class="c"># Now, try it in a function...</span>
hypotenuse <span class="o">()</span>    <span class="c"># Calculate hypotenuse of a right triangle.</span>
<span class="o">{</span>                <span class="c"># c = sqrt( a^2 + b^2 )</span>
<span class="nv">hyp</span><span class="o">=</span><span class="k">$(</span>bc -l <span class="s">&lt;&lt; EOF</span>
<span class="s">scale = 9</span>
<span class="s">sqrt ( $1 * $1 + $2 * $2 )</span>
<span class="s">EOF</span>
<span class="k">)</span>
<span class="c"># Can&#39;t directly return floating point values from a Bash function.</span>
<span class="c"># But, can echo-and-capture:</span>
<span class="nb">echo</span> <span class="s2">&quot;</span><span class="nv">$hyp</span><span class="s2">&quot;</span>
<span class="o">}</span>

<span class="nv">hyp</span><span class="o">=</span><span class="k">$(</span>hypotenuse 3.68 7.31<span class="k">)</span>
<span class="nb">echo</span> <span class="s2">&quot;hypotenuse = </span><span class="nv">$hyp</span><span class="s2">&quot;</span>    <span class="c"># 8.184039344</span>


<span class="nb">exit </span>0
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="exemple-50-calculating-pi">
<h2>Exemple 50. Calculating PI<a class="headerlink" href="#exemple-50-calculating-pi" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># cannon.sh: Approximating PI by firing cannonballs.</span>

<span class="c"># Author: Mendel Cooper</span>
<span class="c"># License: Public Domain</span>
<span class="c"># Version 2.2, reldate 13oct08.</span>

<span class="c"># This is a very simple instance of a &quot;Monte Carlo&quot; simulation:</span>
<span class="c">#+ a mathematical model of a real-life event,</span>
<span class="c">#+ using pseudorandom numbers to emulate random chance.</span>

<span class="c">#  Consider a perfectly square plot of land, 10000 units on a side.</span>
<span class="c">#  This land has a perfectly circular lake in its center,</span>
<span class="c">#+ with a diameter of 10000 units.</span>
<span class="c">#  The plot is actually mostly water, except for land in the four corners.</span>
<span class="c">#  (Think of it as a square with an inscribed circle.)</span>
<span class="c">#</span>
<span class="c">#  We will fire iron cannonballs from an old-style cannon</span>
<span class="c">#+ at the square.</span>
<span class="c">#  All the shots impact somewhere on the square,</span>
<span class="c">#+ either in the lake or on the dry corners.</span>
<span class="c">#  Since the lake takes up most of the area,</span>
<span class="c">#+ most of the shots will SPLASH! into the water.</span>
<span class="c">#  Just a few shots will THUD! into solid ground</span>
<span class="c">#+ in the four corners of the square.</span>
<span class="c">#</span>
<span class="c">#  If we take enough random, unaimed shots at the square,</span>
<span class="c">#+ Then the ratio of SPLASHES to total shots will approximate</span>
<span class="c">#+ the value of PI/4.</span>
<span class="c">#</span>
<span class="c">#  The simplified explanation is that the cannon is actually</span>
<span class="c">#+ shooting only at the upper right-hand quadrant of the square,</span>
<span class="c">#+ i.e., Quadrant I of the Cartesian coordinate plane.</span>
<span class="c">#</span>
<span class="c">#</span>
<span class="c">#  Theoretically, the more shots taken, the better the fit.</span>
<span class="c">#  However, a shell script, as opposed to a compiled language</span>
<span class="c">#+ with floating-point math built in, requires some compromises.</span>
<span class="c">#  This decreases the accuracy of the simulation.</span>


<span class="nv">DIMENSION</span><span class="o">=</span><span class="m">10000</span>  <span class="c"># Length of each side of the plot.</span>
                 <span class="c"># Also sets ceiling for random integers generated.</span>

<span class="nv">MAXSHOTS</span><span class="o">=</span><span class="m">1000</span>    <span class="c"># Fire this many shots.</span>
                 <span class="c"># 10000 or more would be better, but would take too long.</span>
<span class="nv">PMULTIPLIER</span><span class="o">=</span>4.0  <span class="c"># Scaling factor.</span>

<span class="nb">declare</span> -r <span class="nv">M_PI</span><span class="o">=</span>3.141592654
                 <span class="c"># Actual 9-place value of PI, for comparison purposes.</span>

get_random <span class="o">()</span>
<span class="o">{</span>
<span class="nv">SEED</span><span class="o">=</span><span class="k">$(</span>head -n <span class="m">1</span> /dev/urandomod -N <span class="m">1</span> <span class="p">|</span> awk <span class="s1">&#39;{ print $2 }&#39;</span><span class="k">)</span>
<span class="nv">RANDOM</span><span class="o">=</span><span class="nv">$SEED</span>                                  <span class="c">#  From &quot;seeding-random.sh&quot;</span>
                                              <span class="c">#+ example script.</span>
<span class="nb">let</span> <span class="s2">&quot;rnum = </span><span class="nv">$RANDOM</span><span class="s2"> % </span><span class="nv">$DIMENSION</span><span class="s2">&quot;</span>             <span class="c">#  Range less than 10000.</span>
<span class="nb">echo</span> <span class="nv">$rnum</span>
<span class="o">}</span>

<span class="nv">distance</span><span class="o">=</span>        <span class="c"># Declare global variable.</span>
hypotenuse <span class="o">()</span>    <span class="c"># Calculate hypotenuse of a right triangle.</span>
<span class="o">{</span>                <span class="c"># From &quot;alt-bc.sh&quot; example.</span>
<span class="nv">distance</span><span class="o">=</span><span class="k">$(</span>bc -l <span class="s">&lt;&lt; EOF</span>
<span class="s">scale = 0</span>
<span class="s">sqrt ( $1 * $1 + $2 * $2 )</span>
<span class="s">EOF</span>
<span class="k">)</span>
<span class="c">#  Setting &quot;scale&quot; to zero rounds down result to integer value,</span>
<span class="c">#+ a necessary compromise in this script.</span>
<span class="c">#  It decreases the accuracy of this simulation.</span>
<span class="o">}</span>


<span class="c"># ==========================================================</span>
<span class="c"># main() {</span>
<span class="c"># &quot;Main&quot; code block, mimicking a C-language main() function.</span>

<span class="c"># Initialize variables.</span>
<span class="nv">shots</span><span class="o">=</span>0
<span class="nv">splashes</span><span class="o">=</span>0
<span class="nv">thuds</span><span class="o">=</span>0
<span class="nv">Pi</span><span class="o">=</span>0
<span class="nv">error</span><span class="o">=</span>0

<span class="k">while</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$shots</span><span class="s2">&quot;</span> -lt  <span class="s2">&quot;</span><span class="nv">$MAXSHOTS</span><span class="s2">&quot;</span> <span class="o">]</span>           <span class="c"># Main loop.</span>
<span class="k">do</span>

  <span class="nv">xCoord</span><span class="o">=</span><span class="k">$(</span>get_random<span class="k">)</span>                        <span class="c"># Get random X and Y coords.</span>
  <span class="nv">yCoord</span><span class="o">=</span><span class="k">$(</span>get_random<span class="k">)</span>
  hypotenuse <span class="nv">$xCoord</span> <span class="nv">$yCoord</span>                  <span class="c">#  Hypotenuse of</span>
                                              <span class="c">#+ right-triangle = distance.</span>
  <span class="o">((</span>shots++<span class="o">))</span>

  <span class="nb">printf</span> <span class="s2">&quot;#%4d   &quot;</span> <span class="nv">$shots</span>
  <span class="nb">printf</span> <span class="s2">&quot;Xc = %4d  &quot;</span> <span class="nv">$xCoord</span>
  <span class="nb">printf</span> <span class="s2">&quot;Yc = %4d  &quot;</span> <span class="nv">$yCoord</span>
  <span class="nb">printf</span> <span class="s2">&quot;Distance = %5d  &quot;</span> <span class="nv">$distance</span>         <span class="c">#   Distance from</span>
                                              <span class="c">#+  center of lake</span>
                                              <span class="c">#+  -- the &quot;origin&quot; --</span>
                                              <span class="c">#+  coordinate (0,0).</span>

  <span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$distance</span><span class="s2">&quot;</span> -le <span class="s2">&quot;</span><span class="nv">$DIMENSION</span><span class="s2">&quot;</span> <span class="o">]</span>
  <span class="k">then</span>
    <span class="nb">echo</span> -n <span class="s2">&quot;SPLASH!  &quot;</span>
    <span class="o">((</span>splashes++<span class="o">))</span>
  <span class="k">else</span>
    <span class="nb">echo</span> -n <span class="s2">&quot;THUD!    &quot;</span>
    <span class="o">((</span>thuds++<span class="o">))</span>
  <span class="k">fi</span>

  <span class="nv">Pi</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$PMULTIPLIER</span><span class="s2">*</span><span class="nv">$splashes</span><span class="s2">/</span><span class="nv">$shots</span><span class="s2">&quot;</span>bc<span class="k">)</span>
  <span class="c"># Multiply ratio by 4.0.</span>
  <span class="nb">echo</span> -n <span class="s2">&quot;PI ~ </span><span class="nv">$Pi</span><span class="s2">&quot;</span>
  <span class="nb">echo</span>

<span class="k">done</span>

<span class="nb">echo</span>
<span class="nb">echo</span> <span class="s2">&quot;After </span><span class="nv">$shots</span><span class="s2"> shots, PI looks like approximately   </span><span class="nv">$Pi</span><span class="s2">&quot;</span>
<span class="c">#  Tends to run a bit high,</span>
<span class="c">#+ possibly due to round-off error and imperfect randomness of $RANDOM.</span>
<span class="c">#  But still usually within plus-or-minus 5% . . .</span>
<span class="c">#+ a pretty fair rough approximation.</span>
<span class="nv">error</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=9; </span><span class="nv">$Pi</span><span class="s2"> - </span><span class="nv">$M_PI</span><span class="s2">&quot;</span>bc<span class="k">)</span>
<span class="nv">pct_error</span><span class="o">=</span><span class="k">$(</span><span class="nb">echo</span> <span class="s2">&quot;scale=2; 100.0 * </span><span class="nv">$error</span><span class="s2"> / </span><span class="nv">$M_PI</span><span class="s2">&quot;</span>bc<span class="k">)</span>
<span class="nb">echo</span> -n <span class="s2">&quot;Deviation from mathematical value of PI =        </span><span class="nv">$error</span><span class="s2">&quot;</span>
<span class="nb">echo</span> <span class="s2">&quot; (</span><span class="nv">$pct_error</span><span class="s2">% error)&quot;</span>
<span class="nb">echo</span>

<span class="c"># End of &quot;main&quot; code block.</span>
<span class="c"># }</span>
<span class="c"># ==========================================================</span>

<span class="nb">exit </span>0

<span class="c">#  One might well wonder whether a shell script is appropriate for</span>
<span class="c">#+ an application as complex and computation-intensive as a simulation.</span>
<span class="c">#</span>
<span class="c">#  There are at least two justifications.</span>
<span class="c">#  1) As a proof of concept: to show it can be done.</span>
<span class="c">#  2) To prototype and test the algorithms before rewriting</span>
<span class="c">#+    it in a compiled high-level language.</span>
</pre></div>
</div>
<p>See also <a class="reference external" href="contributed-scripts.html#STDDEV">Example A-37</a> .</p>
</div></blockquote>
<dl class="docutils">
<dt><strong>dc</strong></dt>
<dd><p class="first">The <strong>dc</strong> ( <strong>d</strong> esk <strong>c</strong> alculator) utility is
<a class="reference external" href="internalvariables.html#STACKDEFREF">stack-oriented</a> and uses RPN
( <em>Reverse Polish Notation</em> ). Like <strong>bc</strong> , it has much of the
power of a programming language.</p>
<p>Similar to the procedure with <strong>bc</strong> ,
<a class="reference external" href="internal.html#ECHOREF">echo</a> a command-string to <strong>dc</strong> .</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">echo</span> <span class="s2">&quot;[Printing a string ... ]P&quot;</span>dc
<span class="c"># The P command prints the string between the preceding brackets.</span>

<span class="c"># And now for some simple arithmetic.</span>
<span class="nb">echo</span> <span class="s2">&quot;7 8 * p&quot;</span>dc     <span class="c"># 56</span>
<span class="c">#  Pushes 7, then 8 onto the stack,</span>
<span class="c">#+ multiplies (&quot;*&quot; operator), then prints the result (&quot;p&quot; operator).</span>
</pre></div>
</div>
<p class="last">Most persons avoid <strong>dc</strong> , because of its non-intuitive input and
rather cryptic operators. Yet, it has its uses.</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="exemple-51-converting-a-decimal-number-to-hexadecimal">
<h2>Exemple 51. Converting a decimal number to hexadecimal<a class="headerlink" href="#exemple-51-converting-a-decimal-number-to-hexadecimal" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># hexconvert.sh: Convert a decimal number to hexadecimal.</span>

<span class="nv">E_NOARGS</span><span class="o">=</span><span class="m">85</span> <span class="c"># Command-line arg missing.</span>
<span class="nv">BASE</span><span class="o">=</span><span class="m">16</span>     <span class="c"># Hexadecimal.</span>

<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="k">then</span>        <span class="c"># Need a command-line argument.</span>
  <span class="nb">echo</span> <span class="s2">&quot;Usage: </span><span class="nv">$0</span><span class="s2"> number&quot;</span>
  <span class="nb">exit</span> <span class="nv">$E_NOARGS</span>
<span class="k">fi</span>          <span class="c"># Exercise: add argument validity checking.</span>


hexcvt <span class="o">()</span>
<span class="o">{</span>
<span class="k">if</span> <span class="o">[</span> -z <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="k">then</span>
  <span class="nb">echo </span>0
  <span class="k">return</span>    <span class="c"># &quot;Return&quot; 0 if no arg passed to function.</span>
<span class="k">fi</span>

<span class="nb">echo</span> <span class="s2">&quot;&quot;</span><span class="nv">$1</span><span class="s2">&quot; &quot;</span><span class="nv">$BASE</span><span class="s2">&quot; o p&quot;</span>dc
<span class="c">#                  o    sets radix (numerical base) of output.</span>
<span class="c">#                    p  prints the top of stack.</span>
<span class="c"># For other options: &#39;man dc&#39; ...</span>
<span class="k">return</span>
<span class="o">}</span>

hexcvt <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span>

<span class="nb">exit</span>
</pre></div>
</div>
<p>Studying the <a class="reference external" href="basic.html#INFOREF">info</a> page for <strong>dc</strong> is a
painful path to understanding its intricacies. There seems to be a
small, select group of <em>dc wizards</em> who delight in showing off their
mastery of this powerful, but arcane utility.</p>
<div class="highlight-sh"><div class="highlight"><pre>bash<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;16i[q]sa[ln0=aln100%Pln100/snlbx]sbA0D68736142snlbxq&quot;</span>dc
Bash
</pre></div>
</div>
<div class="highlight-sh"><div class="highlight"><pre>dc <span class="o">&lt;&lt;&lt;</span> 10k5v1+2/p <span class="c"># 1.6180339887</span>
<span class="c">#  ^^^            Feed operations to dc using a Here String.</span>
<span class="c">#      ^^^        Pushes 10 and sets that as the precision (10k).</span>
<span class="c">#         ^^      Pushes 5 and takes its square root</span>
<span class="c">#                 (5v, v = square root).</span>
<span class="c">#           ^^    Pushes 1 and adds it to the running total (1+).</span>
<span class="c">#             ^^  Pushes 2 and divides the running total by that (2/).</span>
<span class="c">#               ^ Pops and prints the result (p)</span>
<span class="c">#  The result is  1.6180339887 ...</span>
<span class="c">#  ... which happens to be the Pythagorean Golden Ratio, to 10 places.</span>
</pre></div>
</div>
</div></blockquote>
</div>
<div class="section" id="exemple-52-factoring">
<h2>Exemple 52. Factoring<a class="headerlink" href="#exemple-52-factoring" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># factr.sh: Factor a number</span>

<span class="nv">MIN</span><span class="o">=</span><span class="m">2</span>       <span class="c"># Will not work for number smaller than this.</span>
<span class="nv">E_NOARGS</span><span class="o">=</span>85
<span class="nv">E_TOOSMALL</span><span class="o">=</span>86

<span class="k">if</span> <span class="o">[</span> -z <span class="nv">$1</span> <span class="o">]</span>
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;Usage: </span><span class="nv">$0</span><span class="s2"> number&quot;</span>
  <span class="nb">exit</span> <span class="nv">$E_NOARGS</span>
<span class="k">fi</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> -lt <span class="s2">&quot;</span><span class="nv">$MIN</span><span class="s2">&quot;</span> <span class="o">]</span>
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;Number to factor must be </span><span class="nv">$MIN</span><span class="s2"> or greater.&quot;</span>
  <span class="nb">exit</span> <span class="nv">$E_TOOSMALL</span>
<span class="k">fi</span>

<span class="c"># Exercise: Add type checking (to reject non-integer arg).</span>

<span class="nb">echo</span> <span class="s2">&quot;Factors of </span><span class="nv">$1</span><span class="s2">:&quot;</span>
<span class="c"># -------------------------------------------------------</span>
<span class="nb">echo</span>  <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">[p]s2[lip/dli%0=1dvsr]s12sid2%0=13sidvsr[dli%0=\</span>
<span class="s2">1lrli2+dsi!&gt;.]ds.xd1&lt;2&quot;</span>dc
<span class="c"># -------------------------------------------------------</span>
<span class="c">#  Above code written by Michel Charpentier &lt;charpov@cs.unh.edu&gt;</span>
<span class="c">#  (as a one-liner, here broken into two lines for display purposes).</span>
<span class="c">#  Used in ABS Guide with permission (thanks!).</span>

 <span class="nb">exit</span>

 <span class="c"># $ sh factr.sh 270138</span>
 <span class="c"># 2</span>
 <span class="c"># 3</span>
 <span class="c"># 11</span>
 <span class="c"># 4093</span>
</pre></div>
</div>
</div></blockquote>
<dl class="docutils">
<dt><strong>awk</strong></dt>
<dd>Yet another way of doing floating point math in a script is using
<a class="reference external" href="awk.html#AWKREF">awk&#8217;s</a> built-in math functions in a <a class="reference external" href="wrapper.html#SHWRAPPER">shell
wrapper</a> .</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="exemple-53-calculating-the-hypotenuse-of-a-triangle">
<h2>Exemple 53. Calculating the hypotenuse of a triangle<a class="headerlink" href="#exemple-53-calculating-the-hypotenuse-of-a-triangle" title="Link permanent a aquest títol">¶</a></h2>
<blockquote>
<div><div class="highlight-sh"><div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="c"># hypotenuse.sh: Returns the &quot;hypotenuse&quot; of a right triangle.</span>
<span class="c">#                (square root of sum of squares of the &quot;legs&quot;)</span>

<span class="nv">ARGS</span><span class="o">=</span><span class="m">2</span>                <span class="c"># Script needs sides of triangle passed.</span>
<span class="nv">E_BADARGS</span><span class="o">=</span><span class="m">85</span>          <span class="c"># Wrong number of arguments.</span>

<span class="k">if</span> <span class="o">[</span> <span class="nv">$# </span>-ne <span class="s2">&quot;</span><span class="nv">$ARGS</span><span class="s2">&quot;</span> <span class="o">]</span> <span class="c"># Test number of arguments to script.</span>
<span class="k">then</span>
  <span class="nb">echo</span> <span class="s2">&quot;Usage: `basename </span><span class="nv">$0</span><span class="s2">` side_1 side_2&quot;</span>
  <span class="nb">exit</span> <span class="nv">$E_BADARGS</span>
<span class="k">fi</span>


<span class="nv">AWKSCRIPT</span><span class="o">=</span><span class="s1">&#39; { printf( &quot;%3.7f\n&quot;, sqrt($1*$1 + $2*$2) ) } &#39;</span>
<span class="c">#             command(s) / parameters passed to awk</span>


<span class="c"># Now, pipe the parameters to awk.</span>
    <span class="nb">echo</span> -n <span class="s2">&quot;Hypotenuse of </span><span class="nv">$1</span><span class="s2"> and </span><span class="nv">$2</span><span class="s2"> = &quot;</span>
    <span class="nb">echo</span> <span class="nv">$1</span> <span class="nv">$2awk</span> <span class="s2">&quot;</span><span class="nv">$AWKSCRIPT</span><span class="s2">&quot;</span>
<span class="c">#   ^^^^^^^^^^^^</span>
<span class="c"># An echo-and-pipe is an easy way of passing shell parameters to awk.</span>

<span class="nb">exit</span>

<span class="c"># Exercise: Rewrite this script using &#39;bc&#39; rather than awk.</span>
<span class="c">#           Which method is more intuitive?</span>
</pre></div>
</div>
</div></blockquote>
</div>
</div>


          </div>
          <footer>
  <hr/>

  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extmisc.html" class="btn btn-neutral float-right" title="XXX 16.9. Miscellaneous Commands" accesskey="n">Seg <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="terminalccmds.html" class="btn btn-neutral" title="XXX 16.7. Terminal Control Commands"
                                                            accesskey="p"><span class="fa fa-arrow-circle-left"></span> Ant</a>
      
    </div>
  

  <div role="contentinfo">
    <p>
    </p>
  </div>
      Pàgina generada amb <a href="http://sphinx-doc.org/">Sphinx</a> amb una lleugera
                                     variació del tema<a
                                     href="https://github.com/snide/sphinx_rtd_theme">
                                         sphinx-rtd-theme </a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'10 març de 2014',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>